# Main configuration file for organoid embedding experiments

# Experiment metadata
experiment:
  name: "organoid_embedding_comparison"
  description: "Compare embedding methods for organoid oxygen time series"
  results_dir: "experiments/results"
  
# Data configuration
data:
  use_full_experiment: true
  limit: null  # Set to integer to limit samples for testing
  fill_method: "interpolate"  # "interpolate", "forward_fill", "zero"
  normalize: true
  remove_outliers: false
  target_column: null  # Set to column name if using supervised methods
  time_filter: null
  well_filter: null

# Embedding methods configuration
methods:
  
  # Traditional methods
  dtw:
    enabled: true
    n_components: 50
    sakoe_chiba_radius: null
    n_jobs: -1
    
  fourier:
    enabled: true
    n_components: 100
    include_phase: false
    include_derived: true
    freq_bands:
      - [0.0, 0.1]
      - [0.1, 0.3]
      - [0.3, 0.5]
    
  sax:
    enabled: true
    n_segments: 20
    n_symbols: 4
    word_length: 3
    include_transitions: true
    vectorizer_type: "count"
  
  # Feature-based methods
  tsfresh:
    enabled: true
    feature_set: "comprehensive"  # "comprehensive", "minimal"
    feature_selection: true
    n_jobs: 1
    disable_progressbar: false
    
  catch22:
    enabled: true
    catch24: false
    
  custom_features:
    enabled: true
    smoothing_window: 5
    response_window_hours: 24.0
    sampling_rate_hours: 1.0
    include_baseline_features: true
    include_response_features: true
    include_stability_features: true
  
  # Deep learning methods
  autoencoder:
    enabled: true
    embedding_dim: 64
    architecture: "lstm"  # "lstm" or "cnn"
    hidden_size: 128
    num_layers: 2
    learning_rate: 0.001
    dropout: 0.1
    epochs: 50
    batch_size: 32
    
  transformer:
    enabled: true
    embedding_dim: 64
    d_model: 128
    nhead: 8
    num_layers: 4
    dim_feedforward: 512
    learning_rate: 0.001
    dropout: 0.1
    warmup_epochs: 10
    supervised: false
    epochs: 50
    batch_size: 32
    
  triplet_network:
    enabled: true
    embedding_dim: 128
    architecture: "cnn"  # "cnn" or "lstm"
    hidden_sizes: [256, 512, 256]
    margin: 1.0
    distance_metric: "euclidean"  # "euclidean" or "cosine"
    learning_rate: 0.001
    dropout: 0.1
    triplets_per_sample: 5
    epochs: 50
    batch_size: 32
    training:
      epochs: 50
      batch_size: 32

# Evaluation configuration
evaluation:
  enabled: true
  metrics:
    - "silhouette_score"
    - "calinski_harabasz_score" 
    - "davies_bouldin_score"
  visualization:
    enabled: true
    methods: ["tsne", "umap"]
    save_plots: true

# Logging configuration
logging:
  level: "INFO"
  save_logs: true